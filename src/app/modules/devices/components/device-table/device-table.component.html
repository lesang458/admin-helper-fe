<div class="card">
  <div class="card-body" *ngIf="data$ | async as data">
    <div class="row mb-2">
      <div class="col-5">
        <div class="form-group">
          <label class="d-inline-block mr-3 ml-2" for="day-off-type">
            {{ "DEVICE_TABLE.TYPE_OF_DEVICE" | translate }}
          </label>
          <select
            [formControl]="selectedCategory"
            class="form-control d-inline-block"
            style="width: auto"
            id="device-category"
          >
            <option value="">{{ "DEVICE_TABLE.ALL" | translate }}</option>
            <option *ngFor="let item of data.categories" [value]="item.id">
              {{ item.name }}
            </option>
          </select>
        </div>
      </div>
    </div>
    <div *ngIf="!data.loading">
      <div
        class="card"
        style="margin-bottom: 10px"
        *ngFor="let item of data.devices.data; let i = index"
      >
        <div class="card-header">
          <div class="row">
            <div class="col-3">
              {{ item.name }}
            </div>
            <div class="col-3">
              {{ "DEVICE_TABLE.CATEGORY_NAME" | translate }}
              {{ item.categoryName }}
            </div>
            <div class="col-3">
              {{ "DEVICE_TABLE.ASSIGNED_TO" | translate }}
              {{ getUserName(item.user) }}
            </div>
            <div class="col-3" style="text-align: right">
              <button class="btn btn-ghost">
                <i class="cil-history"></i>
                {{ "DEVICE_TABLE.HISTORY" | translate }}
              </button>
              <button class="btn btn-ghost">
                <span class="cil-brush"></span>
                {{ "DEVICE_TABLE.EDIT" | translate }}
              </button>
              <i
                class="c-icon cil-arrow-circle-bottom"
                style="cursor: pointer"
                role="button"
                (click)="onExpand(item.id)"
              ></i>
            </div>
          </div>
        </div>
        <div class="card-body" id="{{ item.id }}" style="display: none">
          <table class="table table-bordered" style="margin: 0px">
            <tr>
              <td>{{ "DEVICE_TABLE.PRICE" | translate }}</td>
              <td>{{ item.price | currency: "VND" }}</td>
            </tr>
            <tr>
              <td>{{ "DEVICE_TABLE.DESCRIPTION" | translate }}</td>
              <td>{{ item.description }}</td>
            </tr>
          </table>
        </div>
      </div>
      <div class="col-12" *ngIf="data.devices.pagination.totalCount !== 0">
        <pagination
          [totalItems]="data.devices.pagination.totalCount"
          [maxSize]="3"
          [itemsPerPage]="5"
          [(ngModel)]="currentPage"
          (pageChanged)="onPageChanged($event.page)"
          class="pagination-md justify-content-end"
          previousText="&lsaquo;"
          nextText="&rsaquo;"
          firstText="&laquo;"
          lastText="&raquo;"
          [boundaryLinks]="true"
          [rotate]="true"
        >
        </pagination>
      </div>
    </div>
    <div *ngIf="data.loading" class="d-flex justify-content-center">
      <div class="spinner-border mt-2" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
    <div class="d-flex justify-content-end">
      <button type="button" class="btn btn-info">
        <span class="cil-playlist-add btn-icon mr-2"></span>
        {{ "DEVICE_TABLE.CREATE_DEVICE" | translate }}
      </button>
    </div>
  </div>
</div>
