<form [formGroup]="employeeForm" (ngSubmit)="onSubmit()">
  <div class="text-right">
    <button 
      *ngIf="edit || create" 
      type="submit" 
      class="btn btn-success mb-3"
      [disabled]="employeeForm.invalid || dayOffForm.invalid || (employeeForm.value.password !== employeeForm.value.confirmPassword)"
      >
      <span class="cil-save mr-1"></span>
      {{ 'PROFILE_CREATE.SAVE' | translate }}
    </button>
    <button *ngIf="!edit && !create" type="button" class="btn btn-info mb-3 ml-2" (click)="navigateEdit()">
      <span class="cil-brush mr-1"></span>
      {{ 'EMPLOYEE_EDIT.EDIT' | translate }}
    </button>
    <button *ngIf="edit" type="button" class="btn btn-info mb-3 ml-2" (click)="navigateDetail()">
      <span class="cil-address-book mr-1"></span>
      {{ 'EMPLOYEE_EDIT.DETAIL' | translate }}
    </button>
  </div>
  <div class="main-container">
      <div class="row-1">
        <div class="card">
          <div class="card-body">
            <b class="mr-2">{{ 'EMPLOYEE_DETAIL.EMPLOYEE_INFO' | translate }}</b>
            <span *ngIf="!create">
              <span
                class="badge rounded-pill badge-danger p-2"
                *ngIf="employee?.status !== 'ACTIVE'"
                >{{ 'GENERAL_LIST.FORMER' | translate }}
              </span>
              <span
                class="badge rounded-pill badge-success p-2"
                *ngIf="employee?.status === 'ACTIVE'"
                >{{ 'GENERAL_LIST.ACTIVE' | translate }}
              </span>
            </span>
            <div class="info">
              <table class="table table-bordered emp tab">
                <tbody>
                  <tr>
                    <th scope="row">{{ 'PROFILE_CREATE.FIRST_NAME' | translate }}</th>
                    <td> 
                      <input
                      type="text"
                      class="form-control"
                      formControlName="firstName"
                      tabindex="1"
                      required
                    />
                    <div
                    *ngIf="f.firstName.invalid && f.firstName.touched"
                    class="mess-invalid"
                    >
                      <div *ngIf="f.firstName.errors.required">
                        {{ 'PROFILE_CREATE.FIRST_NAME_INVALID' | translate }}
                      </div>
                      <div *ngIf="f.firstName.errors.minlength">
                        {{ 'PROFILE_CREATE.FIRST_NAME_MIN_LENGTH' | translate }}
                      </div>
                      <div *ngIf="f.firstName.errors.maxlength">
                        {{ 'PROFILE_CREATE.FIRST_NAME_MAX_LENGTH' | translate }}
                      </div>
                    </div>
                  </td>
                  
                  </tr>
                  <tr>
                    <th scope="row">{{ 'LOGIN.EMAIL' | translate }}</th>
                    <td colspan="3">
                      <input
                        type="text"
                        class="form-control"
                        formControlName="email"
                        tabindex="3"
                        required
                      />
                      <div
                        *ngIf="f.email.invalid && f.email.touched"
                        class="mess-invalid"
                      >
                        <div *ngIf="f.email.errors.required">
                          {{ 'PROFILE_CREATE.EMAIL_INVALID' | translate }}
                        </div>
                        <div *ngIf="f.email.errors.email">
                          {{ 'PROFILE_CREATE.IS_EMAIL' | translate }}
                        </div>
                      </div>
                    </td>
                  </tr>
                  <tr *ngIf="create">
                    <th scope="row">{{ 'LOGIN.PASS' | translate }}</th>
                    <td colspan="3">
                    <input
                      type="password"
                      class="form-control"
                      id="exampleFormControlInput4"
                      formControlName="password"
                      tabindex="5"
                      required
                  />
                    <div
                      *ngIf="f.password.invalid && f.password.touched"
                      class="mess-invalid"
                    >
                      <div *ngIf="f.password.errors.required">
                        {{ 'PROFILE_CREATE.PASSWORD_INVALID' | translate }}
                      </div>
                      <div *ngIf="f.password.errors.minlength">
                        {{ 'PROFILE_CREATE.PASS_MINLENGTH' | translate }}
                      </div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ 'GENERAL_LIST.BIRTHDAY' | translate }}</th>
                  <td colspan="3">
                    <input
                      type="date"
                      class="form-control"
                      [max]="getToday()"
                      formControlName="birthdate"
                      tabindex="7"
                      required
                    />
                    <div
                      *ngIf="f.birthdate.invalid && f.birthdate.touched"
                      class="mess-invalid"
                      >
                      <div *ngIf="f.birthdate.errors.required">
                        {{ 'PROFILE_CREATE.BIRTHDAY_INVALID' | translate }}
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
              </table>
              <table class="table table-bordered emp">
                <tbody>
                  <tr>
                    <th scope="row">{{ 'PROFILE_CREATE.LAST_NAME' | translate }}</th>
                    <td>
                      <input
                      type="text"
                      class="form-control"
                      formControlName="lastName"
                      tabindex="2"
                      required
                      />
                    <div
                      *ngIf="f.lastName.invalid && f.lastName.touched"
                      class="mess-invalid"
                    >
                      <div *ngIf="f.lastName.errors.required">
                        {{ 'PROFILE_CREATE.LAST_NAME_INVALID' | translate }}
                      </div>
                      <div *ngIf="f.lastName.errors.minlength">
                        {{ 'PROFILE_CREATE.LAST_NAME_MIN_LENGTH' | translate }}
                      </div>
                      <div *ngIf="f.lastName.errors.maxlength">
                        {{ 'PROFILE_CREATE.LAST_NAME_MAX_LENGTH' | translate }}
                      </div>
                    </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">{{ 'GENERAL_LIST.PHONE_NUMBER' | translate }}</th>
                    <td>
                      <input
                        type="text"
                        class="form-control"
                        formControlName="phoneNumber"
                        tabindex="4"
                        required
                      />
                      <div
                        *ngIf="f.phoneNumber.invalid && f.phoneNumber.touched"
                        class="mess-invalid"
                      >
                      {{ getPhoneErrorMessage() }}
                      </div>
                    </td>
                  </tr>
                  <tr *ngIf="create">
                    <th scope="row">{{ 'EMPLOYEE_CREATE.CONFIRM_PASS' | translate }}</th>
                    <td colspan="3">
                      <input
                        type="password"
                        class="form-control"
                        id="exampleFormControlInput11"
                        formControlName="confirmPassword"
                        tabindex="6"
                      />
                      <div 
                        *ngIf="employeeForm.value.password !== employeeForm.value.confirmPassword"
                        class="mess-invalid">
                        {{ 'EMPLOYEE_CREATE.PASSWORD_MATCH' | translate }}
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">{{ 'GENERAL_LIST.JOIN_DATE' | translate }}</th>
                    <td>
                      <input
                        type="date"
                        class="form-control"
                        formControlName="joinDate"
                        tabindex="8"
                        required
                      />
                        <div
                          *ngIf="f.joinDate.invalid && f.joinDate.touched"
                          class="mess-invalid"
                      >
                          <div *ngIf="f.joinDate.errors.required">
                            {{ 'PROFILE_CREATE.JOIN_DATE_INVALID' | translate }}
                          </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="day-off">
        <div class="card" [ngStyle]="{'left': edit || create ? '25%' : '0%'}">
          <form [formGroup]="dayOffForm">
          <div class="card-body">
            <b class="ml-2">{{ 'PROFILE_CREATE.DAY_OFF_INFO' | translate }}</b>
            <div class="infor">
              <table class="table table-bordered">
                <thead class="thead-style">
                  <tr>
                    <th scope="col" class="td-cate">{{ 'PROFILE_CREATE.DAY_OFF_CATE' | translate }}</th>
                    <th scope="col" class="text-right">{{ 'PROFILE_CREATE.HOUR' | translate }}</th>
                    <th scope="col" class="text-right" *ngIf="!edit && !create">{{ 'PROFILE_CREATE.AVAILABLE_HOURS' | translate }}</th>
                  </tr>
                </thead>
                <tbody formArrayName="dayOffInfos">
                  <tr *ngFor="let item of dayOffInfos.controls; let i = index" [formGroupName]="i">
                    <td>{{ dayOffInfos.at(i).get('categoryName').value | titlecase }}</td>
                    <td>
                      <div class="input-group">
                        <div class="input-group-prepend" *ngIf="create">
                          <div class="input-group-text">
                            <input 
                              type="checkbox" 
                              aria-label="Checkbox for following text input" 
                              (change)="checkCheckBoxvalue($event, dayOffInfos.at(i).get('dayOffCategoryId').value)"
                              checked>
                          </div>
                        </div>
                        <input
                          type="number"
                          class="form-control text-right"
                          formControlName="hours"
                          tabindex="{{8 + i}}"
                          required
                        />
                      </div>
                    <div
                      *ngIf="dayOffInfos.controls[i].get('hours').invalid && dayOffInfos.controls[i].get('hours').touched"
                      class="mess-invalid"
                      >
                        <div *ngIf="dayOffInfos.controls[i].get('hours').errors.required">
                          {{ 'PROFILE_CREATE.HOURS_INVALID' | translate }}
                        </div>
                        <div *ngIf="dayOffInfos.controls[i].get('hours').errors.pattern">
                          {{ 'PROFILE_CREATE.HOURS_PATTERN' | translate }}
                        </div>
                    </div>
                    </td>
                    <td class="td-style text-right" *ngIf="!edit && !create">{{ dayOffInfos.at(i).get('availableHours').value }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
        </div>
      </form>
      </div>
        <div class="card" *ngIf="!edit && !create">
          <div class="card-body">
          <b class="ml-2">{{ 'EMPLOYEE_DETAIL.DEVICE' | translate }}</b>
            <div class="infor" *ngIf="device$ | async as data">
              <table class="table table-bordered" *ngIf="data.devices.data?.length > 0">
                <thead class="thead-style">
                  <tr>
                    <th scope="col" class="td-cate">{{ 'DEVICE_EDIT.DEVICE_NAME' | translate }}</th>
                    <th scope="col" class="text-right">{{ 'DEVICE_TABLE.PRICE' | translate }}</th>
                    <th scope="col">{{ 'DEVICE_TABLE.CATEGORY_NAME' | translate }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of data.devices.data; let i = index">
                    <td>{{ item.name }}</td>
                    <td class="text-right">{{ item.price | currency: 'VND' }}</td>
                    <td>{{ item.categoryName }}</td>
                  </tr>
                </tbody>
              </table>
              <div 
                *ngIf="data.devices.data?.length === 0"
                class="alert alert-secondary text-center"
                role="alert">
                {{ 'EMPLOYEE_DETAIL.NO_RESULT' | translate }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</form>
